[program:activity-rule-editor]
command=/opt/activity-rule-editor/.venv/bin/gunicorn -w 4 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8000 --timeout 120 --access-logfile /var/log/activity-rule-editor/access.log --error-logfile /var/log/activity-rule-editor/error.log backend.api.main:app
directory=/opt/activity-rule-editor
user=www-data
autostart=true
autorestart=true
startsecs=10
startretries=3
redirect_stderr=true
stdout_logfile=/var/log/activity-rule-editor/supervisor.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
environment=PATH="/opt/activity-rule-editor/.venv/bin:/usr/local/bin:/usr/bin:/bin"

; 注意：
; 1. 请根据实际情况修改路径和用户
; 2. worker 数量 (-w 4) 建议设置为 CPU 核心数 * 2 + 1
; 3. 如需使用 80 端口，需要 root 权限或配置 setcap
; 4. 此文件可以放在 /etc/supervisord.d/ 目录下，supervisor 会自动加载

